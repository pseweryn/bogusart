(function(b){b.fn.innerfade=function(d){return this.each(function(){b.innerfade(this,d)})};b.innerfade=function(d,e){var a={animationtype:"fade",speed:"normal",type:"sequence",timeout:2E3,containerheight:"auto",runningclass:"innerfade",children:null};e&&b.extend(a,e);var c=null===a.children?b(d).children():b(d).children(a.children);if(1<c.length){b(d).css("position","relative").css("height",a.containerheight).addClass(a.runningclass);for(var g=0;g<c.length;g++)b(c[g]).css("z-index",String(c.length-
g)).css("position","absolute").hide();if("sequence"==a.type)setTimeout(function(){b.innerfade.next(c,a,1,0)},a.timeout),b(c[0]).show();else if("random"==a.type){var h=Math.floor(Math.random()*c.length);setTimeout(function(){do f=Math.floor(Math.random()*c.length);while(h==f);b.innerfade.next(c,a,f,h)},a.timeout);b(c[h]).show()}else if("random_start"==a.type){a.type="sequence";var f=Math.floor(Math.random()*c.length);setTimeout(function(){b.innerfade.next(c,a,(f+1)%c.length,f)},a.timeout);b(c[f]).show()}else alert("Innerfade-Type must either be 'sequence', 'random' or 'random_start'")}};
b.innerfade.next=function(d,e,a,c){"slide"==e.animationtype?(b(d[c]).slideUp(e.speed),b(d[a]).slideDown(e.speed)):"fade"==e.animationtype?(b(d[c]).fadeOut(e.speed),b(d[a]).fadeIn(e.speed,function(){removeFilter(b(this)[0])})):alert("Innerfade-animationtype must either be 'slide' or 'fade'");if("sequence"==e.type)a+1<d.length?(a+=1,c=a-1):(a=0,c=d.length-1);else if("random"==e.type)for(c=a;a==c;)a=Math.floor(Math.random()*d.length);else alert("Innerfade-Type must either be 'sequence', 'random' or 'random_start'");
setTimeout(function(){b.innerfade.next(d,e,a,c)},e.timeout)}})(jQuery);function removeFilter(b){b.style.removeAttribute&&b.style.removeAttribute("filter")};
// -- Sammy.js -- /sammy.js
// http://sammyjs.org
// Version: 0.7.4
// Built: 2013-01-27 13:34:16 -0500
// name: sammy
// version: 0.7.4
// Sammy.js / http://sammyjs.org
(function(e,t){(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):e.sammy=t.Sammy=n(e)})(function(e){var n,r="([^/]+)",i=/:([\w\d]+)/g,s=/\?([^#]*)?$/,o=function(e){return Array.prototype.slice.call(e)},u=function(e){return Object.prototype.toString.call(e)==="[object Function]"},a=function(e){return Object.prototype.toString.call(e)==="[object Array]"},f=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},l=function(e){return decodeURIComponent((e||"").replace(/\+/g," "))},c=encodeURIComponent,h=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p=function(e){return function(){return this.route.apply(this,[e].concat(Array.prototype.slice.call(arguments)))}},d={},v=!!t.history&&!!history.pushState,m=[];return n=function(){var t=o(arguments),r,i;n.apps=n.apps||{};if(t.length===0||t[0]&&u(t[0]))return n.apply(n,["body"].concat(t));if(typeof (i=t.shift())=="string")return r=n.apps[i]||new n.Application,r.element_selector=i,t.length>0&&e.each(t,function(e,t){r.use(t)}),r.element_selector!=i&&delete n.apps[i],n.apps[r.element_selector]=r,r},n.VERSION="0.7.4",n.addLogger=function(e){m.push(e)},n.log=function(){var t=o(arguments);t.unshift("["+Date()+"]"),e.each(m,function(e,r){r.apply(n,t)})},typeof t.console!="undefined"?u(t.console.log.apply)?n.addLogger(function(){t.console.log.apply(t.console,arguments)}):n.addLogger(function(){t.console.log(arguments)}):typeof console!="undefined"&&n.addLogger(function(){console.log.apply(console,arguments)}),e.extend(n,{makeArray:o,isFunction:u,isArray:a}),n.Object=function(t){return e.extend(this,t||{})},e.extend(n.Object.prototype,{escapeHTML:h,h:h,toHash:function(){var t={};return e.each(this,function(e,n){u(n)||(t[e]=n)}),t},toHTML:function(){var t="";return e.each(this,function(e,n){u(n)||(t+="<strong>"+e+"</strong> "+n+"<br />")}),t},keys:function(e){var t=[];for(var n in this)(!u(this[n])||!e)&&t.push(n);return t},has:function(t){return this[t]&&e.trim(this[t].toString())!==""},join:function(){var e=o(arguments),t=e.shift();return e.join(t)},log:function(){n.log.apply(n,arguments)},toString:function(t){var n=[];return e.each(this,function(e,r){(!u(r)||t)&&n.push('"'+e+'": '+r.toString())}),"Sammy.Object: {"+n.join(",")+"}"}}),n.targetIsThisWindow=function(r){var i=e(r.target).attr("target");return!i||i===t.name||i==="_self"?!0:i==="_blank"?!1:i==="top"&&t===t.top?!0:!1},n.DefaultLocationProxy=function(e,t){this.app=e,this.is_native=!1,this.has_history=v,this._startPolling(t)},n.DefaultLocationProxy.fullPath=function(e){var t=e.toString().match(/^[^#]*(#.+)$/),n=t?t[1]:"";return[e.pathname,e.search,n].join("")},e.extend(n.DefaultLocationProxy.prototype,{bind:function(){var r=this,i=this.app,s=n.DefaultLocationProxy;e(t).bind("hashchange."+this.app.eventNamespace(),function(e,n){r.is_native===!1&&!n&&(r.is_native=!0,t.clearInterval(s._interval),s._interval=null),i.trigger("location-changed")}),v&&!i.disable_push_state&&(e(t).bind("popstate."+this.app.eventNamespace(),function(e){i.trigger("location-changed")}),e(document).delegate("a","click.history-"+this.app.eventNamespace(),function(e){if(e.isDefaultPrevented()||e.metaKey||e.ctrlKey)return;var o=s.fullPath(this);if(this.hostname==t.location.hostname&&i.lookupRoute("get",o)&&n.targetIsThisWindow(e))return e.preventDefault(),r.setLocation(o),!1})),s._bindings||(s._bindings=0),s._bindings++},unbind:function(){e(t).unbind("hashchange."+this.app.eventNamespace()),e(t).unbind("popstate."+this.app.eventNamespace()),e(document).undelegate("a","click.history-"+this.app.eventNamespace()),n.DefaultLocationProxy._bindings--,n.DefaultLocationProxy._bindings<=0&&(t.clearInterval(n.DefaultLocationProxy._interval),n.DefaultLocationProxy._interval=null)},getLocation:function(){return n.DefaultLocationProxy.fullPath(t.location)},setLocation:function(e){/^([^#\/]|$)/.test(e)&&(v&&!this.app.disable_push_state?e="/"+e:e="#!/"+e);if(e!=this.getLocation()){if(!(v&&!this.app.disable_push_state&&/^\//.test(e)))return t.location=e;history.pushState({path:e},t.title,e),this.app.trigger("location-changed")}},_startPolling:function(r){var i=this;if(!n.DefaultLocationProxy._interval){r||(r=10);var s=function(){var r=i.getLocation();(typeof n.DefaultLocationProxy._last_location=="undefined"||r!=n.DefaultLocationProxy._last_location)&&t.setTimeout(function(){e(t).trigger("hashchange",[!0])},0),n.DefaultLocationProxy._last_location=r};s(),n.DefaultLocationProxy._interval=t.setInterval(s,r)}}}),n.Application=function(e){var t=this;this.routes={},this.listeners=new n.Object({}),this.arounds=[],this.befores=[],this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1e3,10),this.context_prototype=function(){n.EventContext.apply(this,arguments)},this.context_prototype.prototype=new n.EventContext,u(e)&&e.apply(this,[this]),this._location_proxy||this.setLocationProxy(new n.DefaultLocationProxy(this,this.run_interval_every)),this.debug&&this.bindToAllEvents(function(e,n){t.log(t.toString(),e.cleaned_type,n||{})})},n.Application.prototype=e.extend({},n.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:!1,element_selector:"body",debug:!1,raise_errors:!1,run_interval_every:50,disable_push_state:!1,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(t){return t?e(this.element_selector).find(t):e(this.element_selector)},use:function(){var e=o(arguments),t=e.shift(),r=t||"";try{e.unshift(this),typeof t=="string"&&(r="Sammy."+t,t=n[t]),t.apply(this,e)}catch(i){typeof t=="undefined"?this.error("Plugin Error: called use() but plugin ("+r.toString()+") is not defined",i):u(t)?this.error("Plugin Error",i):this.error("Plugin Error: called use() but '"+r.toString()+"' is not a function",i)}return this},setLocationProxy:function(e){var t=this._location_proxy;this._location_proxy=e,this.isRunning()&&(t&&t.unbind(),this._location_proxy.bind())},log:function(){n.log.apply(n,Array.prototype.concat.apply([this.element_selector],arguments))},route:function(t,n){var s=this,o=[],a,f,l=Array.prototype.slice.call(arguments,2);l.length===0&&u(n)&&(n=t,l=[n],t="any"),t=t.toLowerCase();if(n.constructor==String){i.lastIndex=0;while((f=i.exec(n))!==null)o.push(f[1]);n=new RegExp(n.replace(i,r)+"$")}return e.each(l,function(e,t){typeof t=="string"&&(l[e]=s[t])}),a=function(e){var t={verb:e,path:n,callback:l,param_names:o};s.routes[e]=s.routes[e]||[],s.routes[e].push(t)},t==="any"?e.each(this.ROUTE_VERBS,function(e,t){a(t)}):a(t),this},get:p("get"),post:p("post"),put:p("put"),del:p("delete"),any:p("any"),mapRoutes:function(t){var n=this;return e.each(t,function(e,t){n.route.apply(n,t)}),this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(e,t,n){var r=this;typeof n=="undefined"&&(n=t);var i=function(){var e,t,i;e=arguments[0],i=arguments[1],i&&i.context?(t=i.context,delete i.context):t=new r.context_prototype(r,"bind",e.type,i,e.target),e.cleaned_type=e.type.replace(r.eventNamespace(),""),n.apply(t,[e,i])};return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i),this.isRunning()&&this._listen(e,i),this},trigger:function(e,t){return this.$element().trigger([e,this.eventNamespace()].join("."),[t]),this},refresh:function(){return this.last_location=null,this.trigger("location-changed"),this},before:function(e,t){return u(e)&&(t=e,e={}),this.befores.push([e,t]),this},after:function(e){return this.bind("event-context-after",e)},around:function(e){return this.arounds.push(e),this},onComplete:function(e){return this._onComplete=e,this},isRunning:function(){return this._running},helpers:function(t){return e.extend(this.context_prototype.prototype,t),this},helper:function(e,t){return this.context_prototype.prototype[e]=t,this},run:function(r){if(this.isRunning())return!1;var i=this;return e.each(this.listeners.toHash(),function(t,n){e.each(n,function(e,n){i._listen(t,n)})}),this.trigger("run",{start_url:r}),this._running=!0,this.last_location=null,!/\#(.+)/.test(this.getLocation())&&typeof r!="undefined"&&this.setLocation(r),this._checkLocation(),this._location_proxy.bind(),this.bind("location-changed",function(){i._checkLocation()}),this.bind("submit",function(t){if(!n.targetIsThisWindow(t))return!0;var r=i._checkFormSubmission(e(t.target).closest("form"));return r===!1?t.preventDefault():!1}),e(t).bind("unload",function(){i.unload()}),this.trigger("changed")},unload:function(){if(!this.isRunning())return!1;var t=this;return this.trigger("unload"),this._location_proxy.unbind(),this.$element().unbind("submit").removeClass(t.eventNamespace()),e.each(this.listeners.toHash(),function(n,r){e.each(r,function(e,r){t._unlisten(n,r)})}),this._running=!1,this},destroy:function(){return this.unload(),delete n.apps[this.element_selector],this},bindToAllEvents:function(t){var n=this;return e.each(this.APP_EVENTS,function(e,r){n.bind(r,t)}),e.each(this.listeners.keys(!0),function(r,i){e.inArray(i,n.APP_EVENTS)==-1&&n.bind(i,t)}),this},routablePath:function(e){return e.replace(s,"")},lookupRoute:function(e,t){var n=this,r=!1,i=0,s,o;if(typeof this.routes[e]!="undefined"){s=this.routes[e].length;for(;i<s;i++){o=this.routes[e][i];if(n.routablePath(t).match(o.path)){r=o;break}}}return r},runRoute:function(t,n,r,i){var s=this,o=this.lookupRoute(t,n),u,a,f,c,h,p,d,v,m;this.debug&&this.log("runRoute",[t,n].join(" ")),this.trigger("run-route",{verb:t,path:n,params:r}),typeof r=="undefined"&&(r={}),e.extend(r,this._parseQueryString(n));if(o){this.trigger("route-found",{route:o}),(v=o.path.exec(this.routablePath(n)))!==null&&(v.shift(),e.each(v,function(e,t){o.param_names[e]?r[o.param_names[e]]=l(t):(r.splat||(r.splat=[]),r.splat.push(l(t)))})),u=new this.context_prototype(this,t,n,r,i),f=this.arounds.slice(0),h=this.befores.slice(0),d=[u],r.splat&&(d=d.concat(r.splat)),a=function(){var e,t,n;while(h.length>0){p=h.shift();if(s.contextMatchesOptions(u,p[0])){e=p[1].apply(u,[u]);if(e===!1)return!1}}return s.last_route=o,u.trigger("event-context-before",{context:u}),typeof o.callback=="function"&&(o.callback=[o.callback]),o.callback&&o.callback.length&&(t=-1,n=function(){t++,o.callback[t]?e=o.callback[t].apply(u,d):s._onComplete&&typeof (s._onComplete==="function")&&s._onComplete(u)},d.push(n),n()),u.trigger("event-context-after",{context:u}),e},e.each(f.reverse(),function(e,t){var n=a;a=function(){return t.apply(u,[n])}});try{m=a()}catch(g){this.error(["500 Error",t,n].join(" "),g)}return m}return this.notFound(t,n)},contextMatchesOptions:function(t,n,r){var i=n;if(typeof i=="string"||f(i))i={path:i};typeof r=="undefined"&&(r=!0);if(e.isEmptyObject(i))return!0;if(a(i.path)){var s,o,u,l;s=[];for(o=0,l=i.path.length;o<l;o+=1)u=e.extend({},i,{path:i.path[o]}),s.push(this.contextMatchesOptions(t,u));var c=e.inArray(!0,s)>-1?!0:!1;return r?c:!c}if(i.only)return this.contextMatchesOptions(t,i.only,!0);if(i.except)return this.contextMatchesOptions(t,i.except,!1);var h=!0,p=!0;return i.path&&(f(i.path)||(i.path=new RegExp(i.path.toString()+"$")),h=i.path.test(t.path)),i.verb&&(typeof i.verb=="string"?p=i.verb===t.verb:p=i.verb.indexOf(t.verb)>-1),r?p&&h:!p||!h},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(e){return this._location_proxy.setLocation(e)},swap:function(e,t){var n=this.$element().html(e);return u(t)&&t(e),n},templateCache:function(e,t){return typeof t!="undefined"?d[e]=t:d[e]},clearTemplateCache:function(){return d={}},notFound:function(e,t){var n=this.error(["404 Not Found",e,t].join(" "));return e==="get"?n:!0},error:function(e,t){t||(t=new Error),t.message=[e,t.message].join(" "),this.trigger("error",{message:t.message,error:t});if(this.raise_errors)throw t;this.log(t.message,t)},_checkLocation:function(){var e,t;e=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=e)this.last_location=["get",e],t=this.runRoute("get",e);return t},_getFormVerb:function(t){var n=e(t),r,i;i=n.find('input[name="_method"]'),i.length>0&&(r=i.val()),r||(r=n[0].getAttribute("method"));if(!r||r==="")r="get";return e.trim(r.toString().toLowerCase())},_checkFormSubmission:function(t){var n,r,i,s,o;return this.trigger("check-form-submission",{form:t}),n=e(t),r=n.attr("action")||"",i=this._getFormVerb(n),this.debug&&this.log("_checkFormSubmission",n,r,i),i==="get"?(s=this._serializeFormParams(n),s!==""&&(r+="?"+s),this.setLocation(r),o=!1):(s=e.extend({},this._parseFormParams(n)),o=this.runRoute(i,r,s,t.get(0))),typeof o=="undefined"?!1:o},_serializeFormParams:function(e){var t="",n=e.serializeArray(),r;if(n.length>0){t=this._encodeFormPair(n[0].name,n[0].value);for(r=1;r<n.length;r++)t=t+"&"+this._encodeFormPair(n[r].name,n[r].value)}return t},_encodeFormPair:function(e,t){return c(e)+"="+c(t)},_parseFormParams:function(e){var t={},n=e.serializeArray(),r;for(r=0;r<n.length;r++)t=this._parseParamPair(t,n[r].name,n[r].value);return t},_parseQueryString:function(e){var t={},n,r,i,o;n=e.match(s);if(n&&n[1]){r=n[1].split("&");for(o=0;o<r.length;o++)i=r[o].split("="),t=this._parseParamPair(t,l(i[0]),l(i[1]||""))}return t},_parseParamPair:function(e,t,n){return typeof e[t]!="undefined"?a(e[t])?e[t].push(n):e[t]=[e[t],n]:e[t]=n,e},_listen:function(e,t){return this.$element().bind([e,this.eventNamespace()].join("."),t)},_unlisten:function(e,t){return this.$element().unbind([e,this.eventNamespace()].join("."),t)}}),n.RenderContext=function(e){this.event_context=e,this.callbacks=[],this.previous_content=null,this.content=null,this.next_engine=!1,this.waiting=!1},n.RenderContext.prototype=e.extend({},n.Object.prototype,{then:function(e){if(!u(e)){if(!(typeof e=="string"&&e in this.event_context))return this;var n=this.event_context[e];e=function(e){return n.apply(this.event_context,[e])}}var r=this;return this.waiting?this.callbacks.push(e):(this.wait(),t.setTimeout(function(){var t=e.apply(r,[r.content,r.previous_content]);t!==!1&&r.next(t)},0)),this},wait:function(){this.waiting=!0},next:function(e){this.waiting=!1,typeof e!="undefined"&&(this.previous_content=this.content,this.content=e),this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(t,n,r){var i=this;return this.then(function(){var s,o,a,f;u(n)?(r=n,n={}):n=e.extend({},n),r&&this.then(r);if(typeof t=="string")return a=t.match(/\.json$/)||n.json,s=a?n.cache===!0:n.cache!==!1,i.next_engine=i.event_context.engineFor(t),delete n.cache,delete n.json,n.engine&&(i.next_engine=n.engine,delete n.engine),s&&(o=this.event_context.app.templateCache(t))?o:(this.wait(),e.ajax(e.extend({url:t,data:{},dataType:a?"json":"text",type:"get",success:function(e){s&&i.event_context.app.templateCache(t,e),i.next(e)}},n)),!1);if(t.nodeType)return t.innerHTML;if(t.selector)return i.next_engine=t.attr("data-engine"),n.clone===!1?t.remove()[0].innerHTML.toString():t[0].innerHTML.toString()})},loadPartials:function(e){var t;if(e){this.partials=this.partials||{};for(t in e)(function(t,n){t.load(e[n]).then(function(e){this.partials[n]=e})})(this,t)}return this},render:function(e,t,n,r){return u(e)&&!t?this.then(e):(u(t)?(r=n,n=t,t=null):n&&!u(n)&&(r=n,n=null),this.loadPartials(r).load(e).interpolate(t,e).then(n))},partial:function(e,t,n,r){return u(n)?this.render(e,t,r).swap(n):u(t)?this.render(e,{},n).swap(t):this.render(e,t,n).swap()},send:function(){var e=this,t=o(arguments),n=t.shift();return a(t[0])&&(t=t[0]),this.then(function(r){return t.push(function(t){e.next(t)}),e.wait(),n.apply(n,t),!1})},collect:function(t,n,r){var i=this,s=function(){u(t)&&(n=t,t=this.content);var r=[],s=!1;return e.each(t,function(e,t){var o=n.apply(i,[e,t]);return o.jquery&&o.length==1&&(o=o[0],s=!0),r.push(o),o}),s?r:r.join("")};return r?s():this.then(s)},renderEach:function(t,n,r,i){return a(n)&&(i=r,r=n,n=null),this.load(t).then(function(s){var o=this;r||(r=a(this.previous_content)?this.previous_content:[]);if(!i)return this.collect(r,function(e,r){var i={},o=this.next_engine||t;return n?i[n]=r:i=r,this.event_context.interpolate(s,i,o)},!0);e.each(r,function(e,r){var u={},a=this.next_engine||t;n?u[n]=r:u=r,i(r,o.event_context.interpolate(s,u,a))})})},interpolate:function(e,t,n){var r=this;return this.then(function(i,s){!e&&s&&(e=s),this.next_engine&&(t=this.next_engine,this.next_engine=!1);var o=r.event_context.interpolate(i,e,t,this.partials);return n?s+o:o})},swap:function(e){return this.then(function(t){return this.event_context.swap(t,e),t}).trigger("changed",{})},appendTo:function(t){return this.then(function(n){e(t).append(n)}).trigger("changed",{})},prependTo:function(t){return this.then(function(n){e(t).prepend(n)}).trigger("changed",{})},replace:function(t){return this.then(function(n){e(t).html(n)}).trigger("changed",{})},trigger:function(e,t){return this.then(function(n){return typeof t=="undefined"&&(t={content:n}),this.event_context.trigger(e,t),n})}}),n.EventContext=function(e,t,r,i,s){this.app=e,this.verb=t,this.path=r,this.params=new n.Object(i),this.target=s},n.EventContext.prototype=e.extend({},n.Object.prototype,{$element:function(){return this.app.$element(o(arguments).shift())},engineFor:function(e){var t=this,n;if(u(e))return e;e=(e||t.app.template_engine).toString();if(n=e.match(/\.([^\.\?\#]+)$/))e=n[1];return e&&u(t[e])?t[e]:t.app.template_engine?this.engineFor(t.app.template_engine):function(e,t){return e}},interpolate:function(e,t,n,r){return this.engineFor(n).apply(this,[e,t,r])},render:function(e,t,r,i){return(new n.RenderContext(this)).render(e,t,r,i)},renderEach:function(e,t,r,i){return(new n.RenderContext(this)).renderEach(e,t,r,i)},load:function(e,t,r){return(new n.RenderContext(this)).load(e,t,r)},loadPartials:function(e){return(new n.RenderContext(this)).loadPartials(e)},partial:function(e,t,r,i){return(new n.RenderContext(this)).partial(e,t,r,i)},send:function(){var e=new n.RenderContext(this);return e.send.apply(e,arguments)},redirect:function(){var t,n=o(arguments),r=this.app.getLocation(),i=n.length;if(i>1){var s=0,u=[],a=[],f={},l=!1;for(;s<i;s++)typeof n[s]=="string"?u.push(n[s]):(e.extend(f,n[s]),l=!0);t=u.join("/");if(l){for(var c in f)a.push(this.app._encodeFormPair(c,f[c]));t+="?"+a.join("&")}}else t=n[0];this.trigger("redirect",{to:t}),this.app.last_location=[this.verb,this.path],this.app.setLocation(t),(new RegExp(t)).test(r)&&this.app.trigger("location-changed")},trigger:function(e,t){return typeof t=="undefined"&&(t={}),t.context||(t.context=this),this.app.trigger(e,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(e,t){return this.app.swap(e,t)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(t){return e.parseJSON(t)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}}),n})})(jQuery,window);(function(t,l){"object"===typeof exports&&exports?module.exports=l:"function"===typeof define&&define.amd?define(l):t.Mustache=l})(this,function(){function t(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(a){this.tail=this.string=a;this.pos=0}function j(a,b){this.view=a;this.parent=b;this._cache={}}function m(){this.clearCache()}function r(a,b,c,f){for(var d="",g,e,l=0,j=a.length;l<j;++l)switch(g=a[l],e=g[1],g[0]){case "#":e=c.lookup(e);if("object"===typeof e)if(v(e))for(var n=
0,h=e.length;n<h;++n)d+=r(g[4],b,c.push(e[n]),f);else e&&(d+=r(g[4],b,c.push(e),f));else"function"===typeof e?(g=null==f?null:f.slice(g[3],g[5]),e=e.call(c.view,g,function(a){return b.render(a,c)}),null!=e&&(d+=e)):e&&(d+=r(g[4],b,c,f));break;case "^":e=c.lookup(e);if(!e||v(e)&&0===e.length)d+=r(g[4],b,c,f);break;case ">":e=b.getPartial(e);"function"===typeof e&&(d+=e(c));break;case "&":e=c.lookup(e);null!=e&&(d+=e);break;case "name":e=c.lookup(e);null!=e&&(d+=k.escape(e));break;case "text":d+=e}return d}
function w(a){return[RegExp(t(a[0])+"\\s*"),RegExp("\\s*"+t(a[1]))]}var k={name:"mustache.js",version:"0.7.2",tags:["{{","}}"]};k.Scanner=l;k.Context=j;k.Writer=m;var z=/\s*/,x=/\s+/,A=/\S/,y=/\s*=/,B=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/,D=RegExp.prototype.test,E=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===E.call(a)},F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return F[a]})};
l.prototype.eos=function(){return""===this.tail};l.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=a[0].length,a[0]):""};l.prototype.scanUntil=function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return a};j.make=function(a){return a instanceof j?a:new j(a)};j.prototype.push=
function(a){return new j(a,this)};j.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."==a)b=this.view;else for(var c=this;c;){if(0<a.indexOf("."))for(var b=c.view,f=a.split("."),d=0;b&&d<f.length;)b=b[f[d++]];else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}"function"===typeof b&&(b=b.call(this.view));return b};m.prototype.clearCache=function(){this._cache={};this._partialCache={}};m.prototype.compile=function(a,b){var c=this._cache[a];c||(c=k.parse(a,b),c=this._cache[a]=
this.compileTokens(c,a));return c};m.prototype.compilePartial=function(a,b,c){b=this.compile(b,c);return this._partialCache[a]=b};m.prototype.getPartial=function(a){!(a in this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));return this._partialCache[a]};m.prototype.compileTokens=function(a,b){var c=this;return function(f,d){if(d)if("function"===typeof d)c._loadPartial=d;else for(var g in d)c.compilePartial(g,d[g]);return r(a,c,j.make(f),b)}};m.prototype.render=function(a,
b,c){return this.compile(a)(b,c)};k.parse=function(a,b){a=a||"";b=b||k.tags;"string"===typeof b&&(b=b.split(x));if(2!==b.length)throw Error("Invalid tags: "+b.join(", "));for(var c=w(b),f=new l(a),d=[],g=[],e=[],j=!1,m=!1,n,h,p,s;!f.eos();){n=f.pos;if(p=f.scanUntil(c[0])){s=0;for(var r=p.length;s<r;++s)if(h=p.charAt(s),D.call(A,h)?m=!0:e.push(g.length),g.push(["text",h,n,n+1]),n+=1,"\n"==h){if(j&&!m)for(;e.length;)delete g[e.pop()];else e=[];m=j=!1}}if(!f.scan(c[0]))break;j=!0;h=f.scan(C)||"name";
f.scan(z);"="===h?(p=f.scanUntil(y),f.scan(y),f.scanUntil(c[1])):"{"===h?(p=f.scanUntil(RegExp("\\s*"+t("}"+b[1]))),f.scan(B),f.scanUntil(c[1]),h="&"):p=f.scanUntil(c[1]);if(!f.scan(c[1]))throw Error("Unclosed tag at "+f.pos);s=[h,p,n,f.pos];g.push(s);if("#"===h||"^"===h)d.push(s);else if("/"===h){if(0===d.length)throw Error('Unopened section "'+p+'" at '+n);h=d.pop();if(h[1]!==p)throw Error('Unclosed section "'+h[1]+'" at '+n);}else if("name"===h||"{"===h||"&"===h)m=!0;else if("="===h){b=p.split(x);
if(2!==b.length)throw Error("Invalid tags at "+n+": "+b.join(", "));c=w(b)}}if(h=d.pop())throw Error('Unclosed section "'+h[1]+'" at '+f.pos);for(var c=g,f=[],q,g=0,e=c.length;g<e;++g)if(d=c[g])"text"===d[0]&&q&&"text"===q[0]?(q[1]+=d[1],q[3]=d[3]):(q=d,f.push(d));q=f;f=c=[];d=[];e=0;for(j=q.length;e<j;++e)switch(g=q[e],g[0]){case "#":case "^":d.push(g);f.push(g);f=g[4]=[];break;case "/":d.pop()[5]=g[2];f=0<d.length?d[d.length-1][4]:c;break;default:f.push(g)}return c};var u=new m;k.clearCache=function(){return u.clearCache()};
k.compile=function(a,b){return u.compile(a,b)};k.compilePartial=function(a,b,c){return u.compilePartial(a,b,c)};k.compileTokens=function(a,b){return u.compileTokens(a,b)};k.render=function(a,b,c){return u.render(a,b,c)};k.to_html=function(a,b,c,f){a=k.render(a,b,c);if("function"===typeof f)f(a);else return a};return k}());
(function(c){"function"===typeof define&&define.amd?define(["jquery","sammy","mustache"],c):(window.Sammy=window.Sammy||{}).Mustache=c(window.jQuery,window.Sammy,window.Mustache)})(function(c,b,e){b.Mustache=function(b,a){a||(a="mustache");b.helper(a,function(b,d,a){d=c.extend({},this,d);a=c.extend({},d.partials,a);return e.to_html(b,d,a)})};return b.Mustache});
var engine=$.sammy(function(){var b=["#/"+categories[0],"#/"+categories[1],"#/"+categories[2],"#/"+categories[3],"#/"+categories[4],"#/"+categories[5]];this.use("Mustache","ms");this.element_selector="#portofolio";this.get("#/portofolio",function(a){initFader();$("footer").show();a.app.swap("");for(var c=0;c<portofolio.length;)a.renderEach("templates/box.ms",[{link:b[c],img:portofolio[c],title:categories[c]}]).appendTo(a.$element()),c++});this.get(b[0],function(a){renderImages(a,0,illustrations)});
this.get(b[1],function(a){renderImages(a,1,drawings)});this.get(b[2],function(a){renderImages(a,2,graphics)});this.get(b[3],function(a){renderImages(a,3,photos)});this.get(b[4],function(a){renderImages(a,4,paintings)});this.get(b[5],function(a){renderImages(a,5,other)});this.get("#/about",function(a){toggleFaderAndFooter();a.app.swap("");a.render("templates/about.ms").appendTo(a.$element())})});
function initFader(){isMobile()||($(".fader").append(renderFader(fader)),$(".fader-inner").innerfade({speed:3E3,timeout:5500,containerheight:500,type:"random"}))}function isMobile(){return 640>=document.body.clientWidth}function renderImages(b,a,c){toggleFaderAndFooter(!0);b.app.swap("");b.$element().append("<h1>"+categories[a]+"</h1>");for(var d=0;d<c.length;d++)b.renderEach("templates/image.ms",[{link:categories[a]+"/"+c[d]}]).appendTo(b.$element())}
function renderFader(b){for(var a='<div class="fader-inner">',c=0;c<b.length;c++)a+='<img src="img/slider/'+b[c]+'" alt="">';return a+"</div>"}function toggleFaderAndFooter(b){$(".fader-inner").remove();b?$("footer").show():$("footer").hide()}$(function(){engine.run("#/portofolio")});
(function(){var a,k;a=jQuery;k=function(){this.fileLoadingImage="img/lightbox/loading.gif";this.fileCloseImage="img/lightbox/close.png";this.resizeDuration=700;this.fadeDuration=500;this.labelImage="Image";this.labelOf="of"};var d=function(a){this.options=a;this.album=[];this.currentImageIndex=void 0;this.init()};d.prototype.init=function(){this.enable();return this.build()};d.prototype.enable=function(){var b=this;return a("body").on("click","a[rel^=lightbox], area[rel^=lightbox]",function(c){b.start(a(c.currentTarget));
return!1})};d.prototype.build=function(){var b,c=this;a("<div>",{id:"lightboxOverlay"}).after(a("<div/>",{id:"lightbox"}).append(a("<div/>",{"class":"lb-outerContainer"}).append(a("<div/>",{"class":"lb-container"}).append(a("<img/>",{"class":"lb-image"}),a("<div/>",{"class":"lb-nav"}).append(a("<a/>",{"class":"lb-prev"}),a("<a/>",{"class":"lb-next"})),a("<div/>",{"class":"lb-loader"}).append(a("<a/>",{"class":"lb-cancel"}).append(a("<img/>",{src:this.options.fileLoadingImage}))))),a("<div/>",{"class":"lb-dataContainer"}).append(a("<div/>",
{"class":"lb-data"}).append(a("<div/>",{"class":"lb-details"}).append(a("<span/>",{"class":"lb-caption"}),a("<span/>",{"class":"lb-number"})),a("<div/>",{"class":"lb-closeContainer"}).append(a("<a/>",{"class":"lb-close"}).append(a("<img/>",{src:this.options.fileCloseImage}))))))).appendTo(a("body"));a("#lightboxOverlay").hide().on("click",function(){c.end();return!1});b=a("#lightbox");b.hide().on("click",function(b){"lightbox"===a(b.target).attr("id")&&c.end();return!1});b.find(".lb-outerContainer").on("click",
function(b){"lightbox"===a(b.target).attr("id")&&c.end();return!1});b.find(".lb-prev").on("click",function(){c.changeImage(c.currentImageIndex-1);return!1});b.find(".lb-next").on("click",function(){c.changeImage(c.currentImageIndex+1);return!1});b.find(".lb-loader, .lb-close").on("click",function(){c.end();return!1})};d.prototype.start=function(b){var c,l,e,d,h;a(window).on("resize",this.sizeOverlay);a("select, object, embed").css({visibility:"hidden"});a("#lightboxOverlay").width(a(document).width()).height(a(document).height()).fadeIn(this.options.fadeDuration);
this.album=[];e=0;if("lightbox"===b.attr("rel"))this.album.push({link:b.attr("href"),title:b.attr("title")});else{h=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]');l=0;for(d=h.length;l<d;l++)c=h[l],this.album.push({link:a(c).attr("href"),title:a(c).attr("title")}),a(c).attr("href")===b.attr("href")&&(e=l)}c=a(window);b=c.scrollTop()+c.height()/10;c=c.scrollLeft();a("#lightbox").css({top:b+"px",left:c+"px"}).fadeIn(this.options.fadeDuration);this.changeImage(e)};d.prototype.changeImage=function(b){var c,
d,e,f=this;this.disableKeyboardNav();d=a("#lightbox");c=d.find(".lb-image");this.sizeOverlay();a("#lightboxOverlay").fadeIn(this.options.fadeDuration);a(".loader").fadeIn("slow");d.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();d.find(".lb-outerContainer").addClass("animating");e=new Image;e.onload=function(){c.attr("src",f.album[b].link);c.width=e.width;c.height=e.height;return f.sizeContainer(e.width,e.height)};e.src=this.album[b].link;this.currentImageIndex=
b};d.prototype.sizeOverlay=function(){return a("#lightboxOverlay").width(a(document).width()).height(a(document).height())};d.prototype.sizeContainer=function(b,c){var d,e,f,h,k,p,g,j,m,n,q=this;e=a("#lightbox");f=e.find(".lb-outerContainer");n=f.outerWidth();m=f.outerHeight();d=e.find(".lb-container");p=parseInt(d.css("padding-top"),10);k=parseInt(d.css("padding-right"),10);h=parseInt(d.css("padding-bottom"),10);d=parseInt(d.css("padding-left"),10);j=b+d+k;g=c+p+h;j!==n&&g!==m?f.animate({width:j,
height:g},this.options.resizeDuration,"swing"):j!==n?f.animate({width:j},this.options.resizeDuration,"swing"):g!==m&&f.animate({height:g},this.options.resizeDuration,"swing");setTimeout(function(){e.find(".lb-dataContainer").width(j);e.find(".lb-prevLink").height(g);e.find(".lb-nextLink").height(g);q.showImage()},this.options.resizeDuration)};d.prototype.showImage=function(){var b;b=a("#lightbox");b.find(".lb-loader").hide();b.find(".lb-image").fadeIn("slow");this.updateNav();this.updateDetails();
this.preloadNeighboringImages();this.enableKeyboardNav()};d.prototype.updateNav=function(){var b;b=a("#lightbox");b.find(".lb-nav").show();0<this.currentImageIndex&&b.find(".lb-prev").show();this.currentImageIndex<this.album.length-1&&b.find(".lb-next").show()};d.prototype.updateDetails=function(){var b,c=this;b=a("#lightbox");"undefined"!==typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&b.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast");
1<this.album.length?b.find(".lb-number").html(this.options.labelImage+" "+(this.currentImageIndex+1)+" "+this.options.labelOf+"  "+this.album.length).fadeIn("fast"):b.find(".lb-number").hide();b.find(".lb-outerContainer").removeClass("animating");b.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return c.sizeOverlay()})};d.prototype.preloadNeighboringImages=function(){var a;this.album.length>this.currentImageIndex+1&&(a=new Image,a.src=this.album[this.currentImageIndex+1].link);0<
this.currentImageIndex&&(a=new Image,a.src=this.album[this.currentImageIndex-1].link)};d.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))};d.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")};d.prototype.keyboardAction=function(a){var c;c=a.keyCode;a=String.fromCharCode(c).toLowerCase();27===c||a.match(/x|o|c/)?this.end():"p"===a||37===c?0!==this.currentImageIndex&&this.changeImage(this.currentImageIndex-1):("n"===a||39===
c)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)};d.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);a("#lightbox").fadeOut(this.options.fadeDuration);a("#lightboxOverlay").fadeOut(this.options.fadeDuration);return a("select, object, embed").css({visibility:"visible"})};a(function(){var a;a=new k;return new d(a)})}).call(this);
